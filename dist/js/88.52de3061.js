"use strict";(self["webpackChunk_0supermall"]=self["webpackChunk_0supermall"]||[]).push([[88],{5895:function(e,t,o){o.r(t),o.d(t,{default:function(){return N}});var s=o(6252),i=o(3577),l=o(9963);const r=e=>((0,s.dD)("data-v-7642cabc"),e=e(),(0,s.Cn)(),e),a={id:"home"},n=r((()=>(0,s._)("p",null,"购物车",-1)));function c(e,t,o,r,c,m){const d=(0,s.up)("nav-bar"),h=(0,s.up)("tab-control"),p=(0,s.up)("home-swiper"),u=(0,s.up)("home-recommend-view"),f=(0,s.up)("feature-view"),g=(0,s.up)("goods-list"),b=(0,s.up)("scroll"),k=(0,s.up)("back-top");return(0,s.wg)(),(0,s.iD)("div",a,[(0,s.Wm)(d,{ref:"homenav",class:"home-nav",style:{}},{center:(0,s.w5)((()=>[n])),_:1},512),(0,s.wy)((0,s.Wm)(h,{titles:["流行","新款","精选"],ref:"tabControl1",class:"tab-control2",style:(0,i.j5)({top:c.homenavTop+"px"}),onTabClick:m.tabClick},null,8,["style","onTabClick"]),[[l.F8,c.isTabFixed]]),(0,s.Wm)(b,{data:e.$data,"probe-type":3,"pull-up-load":!0,class:"wrapper",ref:"scroll",onPullingUp:m.pullingUp,onScroll:m.cotentScroll},{default:(0,s.w5)((()=>[(0,s.Wm)(p,{onImgload3:m.imgload3,banners:c.banners},null,8,["onImgload3","banners"]),(0,s.Wm)(u,{recommends:c.recommends},null,8,["recommends"]),(0,s.Wm)(f,{onImgload2:m.imgload2},null,8,["onImgload2"]),(0,s.Wm)(h,{titles:["流行","新款","精选"],ref:"tabControl2",onTabClick:m.tabClick},null,8,["onTabClick"]),(0,s.Wm)(g,{onHomeimgload:m.imgload,goods:m.showGoods},null,8,["onHomeimgload","goods"])])),_:1},8,["data","onPullingUp","onScroll"]),(0,s.wy)((0,s.Wm)(k,{onClick:e.backClick},null,8,["onClick"]),[[l.F8,e.isShowBackTop]])])}const m=["href"],d=["src"];function h(e,t,o,i,l,r){const a=(0,s.up)("swiper-item"),n=(0,s.up)("swiper");return(0,s.wg)(),(0,s.j4)(n,{ref:"swiper"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.banners,(e=>((0,s.wg)(),(0,s.j4)(a,{key:e.title,class:"swiper-item"},{default:(0,s.w5)((()=>[(0,s._)("a",{href:e.link},[(0,s._)("img",{onLoad:t[0]||(t[0]=(...e)=>r.imgload&&r.imgload(...e)),class:"imgs",src:e.image,alt:""},null,40,d)],8,m)])),_:2},1024)))),128))])),_:1},512)}var p=o(2215),u={name:"HomeSwiper",data(){return{}},props:{banners:{type:Array,dafault(){return[]}}},data(){return{isLoad:!1}},components:{Swiper:p.k,SwiperItem:p.t},methods:{imgload(){this.isLoad||(this.$emit("imgload3"),this.$refs.swiper.handleDom(),this.isLoad=!0)}}},f=o(3744);const g=(0,f.Z)(u,[["render",h]]);var b=g;const k={class:"recommend"},w=["href"],T={alt:""};function v(e,t,o,l,r,a){const n=(0,s.Q2)("lazy");return(0,s.wg)(),(0,s.iD)("div",k,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.recommends,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e.title,class:"recommend-item"},[(0,s._)("a",{href:e.link},[(0,s.wy)((0,s._)("img",T,null,512),[[n,e.image]]),(0,s._)("div",null,(0,i.zw)(e.title),1)],8,w)])))),128))])}var y={name:"HomeRecommendView",props:{recommends:{type:Array,default(){return[]}}}};const C=(0,f.Z)(y,[["render",v]]);var $=C,I=o(8775);const H={class:"feature"},_={href:""};function x(e,t,o,i,l,r){return(0,s.wg)(),(0,s.iD)("div",H,[(0,s._)("a",_,[(0,s._)("img",{onLoad:t[0]||(t[0]=(...t)=>e.imgload2&&e.imgload2(...t)),src:I,alt:""},null,32)])])}var D={name:"FeatureView",methods(){this.$emit("imgload2")}};const S=(0,f.Z)(D,[["render",x]]);var W=S,G=o(5865);const O={class:"tab-control"},Z=["onClick"];function F(e,t,o,l,r,a){return(0,s.wg)(),(0,s.iD)("div",O,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.titles,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{key:t,ref_for:!0,ref:"TabControlTop",class:(0,i.C_)(["tab-control-item",{active:t===r.currentIndex}]),onClick:e=>a.itemClick(t)},[(0,s._)("span",null,(0,i.zw)(e),1)],10,Z)))),128))])}var L={nane:"TabControl",data(){return{currentIndex:0}},props:{titles:{type:Array,default(){return[]}}},methods:{itemClick(e){this.currentIndex=e,this.$emit("tabClick",e)}}};const A=(0,f.Z)(L,[["render",F]]);var U=A,j=o(9367),V=o(8671),z=o(7227),B=o(7707);function K(){return(0,B.W)({url:"/home/multidata"})}function P(e,t){return(0,B.W)({url:"/home/data",params:{type:e,page:t}})}var Y=o(4493),M={name:"home",data(){return{banners:[],recommends:[],goods:{pop:{page:0,list:[]},new:{page:0,list:[]},sell:{page:0,list:[]}},currentType:"pop",navAanTabHeight:0,tabOffsetTop:0,homenavTop:0,isTabFixed:!1,clickItemtop0:0,clickItemtop:0,clickItemtop2:0,clickItemtop3:0}},mixins:[z.s],components:{HomeSwiper:b,HomeRecommendView:$,FeatureView:W,NavBar:G.Z,TabControl:U,GoodsList:j.Z,GoodsList:j.Z,Scroll:V.Z},computed:{showGoods(){return this.goods[this.currentType].list}},destroyed(){console.log("home destroyed")},created(){this.$nextTick((()=>{this.getHomeMultidata()})),this.$nextTick((()=>{this.getHomeGoods("pop"),this.getHomeGoods("new"),this.getHomeGoods("sell")}))},mounted(){},activated(){this.$refs.scroll.refresh()},deactivated(){},methods:{tabClick(e){switch(this.$refs.tabControl1.currentIndex=e,this.$refs.tabControl2.currentIndex=e,e){case 0:this.currentType="pop",-this.clickItemtop<this.tabOffsetTop?this.$refs.scroll.scrollTo(0,-this.tabOffsetTop,0):this.$refs.scroll.scrollTo(0,this.clickItemtop,0);break;case 1:this.currentType="new",-this.clickItemtop2<this.tabOffsetTop?this.$refs.scroll.scrollTo(0,-this.tabOffsetTop,0):this.$refs.scroll.scrollTo(0,this.clickItemtop2,0);break;case 2:this.currentType="sell",-this.clickItemtop3<this.tabOffsetTop?this.$refs.scroll.scrollTo(0,-this.tabOffsetTop,0):this.$refs.scroll.scrollTo(0,this.clickItemtop3,0);break}},imgload(){const e=(0,Y.D)(this.$refs.scroll.refresh,10);e()},imgload2(){this.imgload()},imgload3(){this.imgload(),this.tabOffsetTop=this.$refs.tabControl2.$el.offsetTop,this.homenavTop=this.$refs.homenav.$el.offsetHeight,this.navAanTabHeight=this.$refs.tabControl1.$el.offsetHeight+this.$refs.homenav.$el.offsetHeight},cotentScroll(e){switch(this.listanShoBackTop(e),this.isTabFixed=-e.y>this.tabOffsetTop,this.$refs.tabControl1.currentIndex){case 0:this.clickItemtop=e.y;break;case 1:this.clickItemtop2=e.y;break;case 2:this.clickItemtop3=e.y;break}},pullingUp(){this.getHomeGoods(this.currentType)},getHomeMultidata(){K().then((e=>{this.banners=e.data.banner.list,this.recommends=e.data.recommend.list,setTimeout((()=>{this.$refs.scroll.refresh()}),50)}))},getHomeGoods(e){const t=this.goods[e].page+1;P(e,t).then((t=>{0!==t.data.list.length&&(this.goods[e].list.push(...t.data.list),this.goods[e].page+=1),setTimeout((()=>{this.$refs.scroll.refresh()}),50),this.$refs.scroll.finishPullUp()}))}}};const R=(0,f.Z)(M,[["render",c],["__scopeId","data-v-7642cabc"]]);var N=R},8775:function(e,t,o){e.exports=o.p+"img/recommend_bg.a1646d5d.jpg"}}]);
//# sourceMappingURL=88.52de3061.js.map
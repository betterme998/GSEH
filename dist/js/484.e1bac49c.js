"use strict";(self["webpackChunk_0supermall"]=self["webpackChunk_0supermall"]||[]).push([[484],{5042:function(e,s,t){t.r(s),t.d(s,{default:function(){return ps}});var a=t(6252),o=t(9963);const i={id:"detail"};function n(e,s,t,n,l,d){const r=(0,a.up)("detail-nav-bar"),c=(0,a.up)("detail-swiper"),m=(0,a.up)("detail-base-info"),h=(0,a.up)("detail-shop-info"),p=(0,a.up)("detail-goods-info"),u=(0,a.up)("detail-param-info"),f=(0,a.up)("detail-comment-info"),g=(0,a.up)("goods-list"),v=(0,a.up)("scroll"),w=(0,a.up)("back-top"),_=(0,a.up)("detail-bottom-bar"),I=(0,a.up)("toast");return(0,a.wg)(),(0,a.iD)("div",i,[(0,a.Wm)(r,{ref:"detailnavbat",onTitleClick:d.titleClick},null,8,["onTitleClick"]),(0,a.Wm)(v,{class:"content2","probe-type":3,"pull-up-load":!0,ref:"scroll",onScroll:d.contentScroll},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{onImageLoad:d.imageLoad,"top-images":l.topImages},null,8,["onImageLoad","top-images"]),(0,a.Wm)(m,{goods:l.goods},null,8,["goods"]),(0,a.Wm)(h,{shop:l.shop},null,8,["shop"]),(0,a.Wm)(p,{"images-info":l.detailInfo,onImgLoad:d.imgLoad},null,8,["images-info","onImgLoad"]),(0,a.Wm)(u,{ref:"params","param-info":l.paramInfo},null,8,["param-info"]),(0,a.Wm)(f,{ref:"comment","comment-info":l.commentInfo},null,8,["comment-info"]),(0,a.Wm)(g,{ref:"recommend",goods:l.recommends,onDetailimgload:d.goodsimgload},null,8,["goods","onDetailimgload"])])),_:1},8,["onScroll"]),(0,a.wy)((0,a.Wm)(w,{onClick:e.backClick},null,8,["onClick"]),[[o.F8,e.isShowBackTop]]),(0,a.Wm)(_,{onAddCart:d.addToCart},null,8,["onAddCart"]),(0,a.Wm)(I,{show:l.show,massage:l.massage},null,8,["show","massage"])])}var l=t(3577);const d=e=>((0,a.dD)("data-v-3dca6d20"),e=e(),(0,a.Cn)(),e),r=d((()=>(0,a._)("span",{class:"iconfont icon-fanhui"},null,-1))),c=[r],m={class:"title"},h=["onClick"];function p(e,s,t,o,i,n){const d=(0,a.up)("nav-bar");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(d,null,{left:(0,a.w5)((()=>[(0,a._)("div",{onClick:s[0]||(s[0]=(...e)=>n.backClick&&n.backClick(...e))},c)])),center:(0,a.w5)((()=>[(0,a._)("div",m,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.titles,((e,s)=>((0,a.wg)(),(0,a.iD)("div",{key:s,class:(0,l.C_)(["title-item",{active:s===i.currentIndex}]),onClick:e=>n.titleClick(s)},(0,l.zw)(e),11,h)))),128))])])),right:(0,a.w5)((()=>[])),_:1})])}var u=t(5865),f={name:"DetailNavBar",components:{NavBar:u.Z},data(){return{titles:["商品","参数","评论","推荐"],currentIndex:0}},methods:{titleClick(e){this.currentIndex=e,this.$emit("titleClick",e)},backClick(){this.$router.back()}}},g=t(3744);const v=(0,g.Z)(f,[["render",p],["__scopeId","data-v-3dca6d20"]]);var w=v;const _=["src"];function I(e,s,t,o,i,n){const l=(0,a.up)("swiper-item"),d=(0,a.up)("swiper");return(0,a.wg)(),(0,a.j4)(d,{ref:"swiper",class:"detail-swiper"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.topImages,((e,t)=>((0,a.wg)(),(0,a.j4)(l,{key:t},{default:(0,a.w5)((()=>[(0,a._)("img",{ref_for:!0,ref:"image",onLoad:s[0]||(s[0]=(...e)=>n.DatailImageLoad&&n.DatailImageLoad(...e)),class:"detailImg",src:e,alt:""},null,40,_)])),_:2},1024)))),128))])),_:1},512)}var D=t(2215),b={name:"DetailSwiper",data(){return{ImageLoad:!1}},components:{Swiper:D.k,SwiperItem:D.t},props:{topImages:{type:Array,default(){return[]}}},beforeUnmount(){this.DatailImageLoad=null},methods:{DatailImageLoad(){!1===this.ImageLoad&&this.$route.path.indexOf("/home")&&(this.$refs.swiper.handleDom(),this.$emit("imageLoad")),this.ImageLoad=!0}}};const k=(0,g.Z)(b,[["render",I],["__scopeId","data-v-1bad618f"]]);var y=k;const C={key:0,class:"base-info"},T={class:"info-title"},z={class:"info-price"},L={class:"n-price"},$={class:"o-price"},Y={key:0,class:"discount"},x={class:"info-other"},S={class:"info-services"},W=["src"];function B(e,s,t,o,i,n){return 0!==Object.keys(t.goods).length?((0,a.wg)(),(0,a.iD)("div",C,[(0,a._)("div",T,(0,l.zw)(t.goods.title),1),(0,a._)("div",z,[(0,a._)("span",L,(0,l.zw)(t.goods.newPrice),1),(0,a._)("span",$,(0,l.zw)(t.goods.oldPrice),1),t.goods.discount?((0,a.wg)(),(0,a.iD)("span",Y,(0,l.zw)(t.goods.discount),1)):(0,a.kq)("",!0)]),(0,a._)("div",x,[(0,a._)("span",null,(0,l.zw)(t.goods.columns[0]),1),(0,a._)("span",null,(0,l.zw)(t.goods.columns[1]),1),(0,a._)("span",null,(0,l.zw)(t.goods.services[t.goods.services.length-1].name),1)]),(0,a._)("div",S,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.goods.services.length-1,(e=>((0,a.wg)(),(0,a.iD)("span",{class:"info-services-item",key:e},[(0,a._)("img",{src:t.goods.services[e-1].icon,alt:""},null,8,W),(0,a._)("span",null,(0,l.zw)(t.goods.services[e-1].name),1)])))),128))])])):(0,a.kq)("",!0)}var Z={name:"DetailBaseInfo",props:{goods:{type:Object,default(){return{}}}}};const H=(0,g.Z)(Z,[["render",B],["__scopeId","data-v-7442a37a"]]);var P=H;const j=e=>((0,a.dD)("data-v-17d2393a"),e=e(),(0,a.Cn)(),e),K={class:"shop-info"},O={class:"shop-top"},F=["src"],q={class:"title"},G={class:"shop-middle"},N={class:"shop-middle-item shop-middle-left"},U={class:"info-sells"},A={class:"sells-count",style:{"{fontSize":"5.625vw"}},Q=j((()=>(0,a._)("div",{class:"sells-text"},"总销量",-1))),M={class:"info-goods"},E={class:"goods-count"},R=j((()=>(0,a._)("div",{class:"goods-text"},"全部宝贝",-1))),J={class:"shop-middle-item shop-middle-right"},V=j((()=>(0,a._)("div",{class:"shop-bottom"},[(0,a._)("div",{class:"enter-shop"},"进店逛逛")],-1)));function X(e,s,t,o,i,n){return(0,a.wg)(),(0,a.iD)("div",K,[(0,a._)("div",O,[(0,a._)("img",{src:t.shop.logo},null,8,F),(0,a._)("span",q,(0,l.zw)(t.shop.name),1)]),(0,a._)("div",G,[(0,a._)("div",N,[(0,a._)("div",U,[(0,a._)("div",A,(0,l.zw)(n.sellCountFilter()),1),Q]),(0,a._)("div",M,[(0,a._)("div",E,(0,l.zw)(t.shop.goodsCount),1),R])]),(0,a._)("div",J,[(0,a._)("table",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.shop.score,((e,s)=>((0,a.wg)(),(0,a.iD)("tr",{key:s},[(0,a._)("td",null,(0,l.zw)(e.name),1),(0,a._)("td",{class:(0,l.C_)(["score",{"score-better":e.isBetter}])},(0,l.zw)(e.score),3),(0,a._)("td",{class:(0,l.C_)(["better",{"better-more":e.isBetter}])},[(0,a._)("span",null,(0,l.zw)(e.isBetter?"高":"低"),1)],2)])))),128))])])]),V])}var ee={name:"DetailShopInfo",props:{shop:{type:Object,default(){return{}}}},mounted(){this.sellCountFilter()},methods:{sellCountFilter(){return this.shop.sells<1e4?this.shop.sells:(this.shop.sells/1e4).toFixed(1)+"W"}}};const se=(0,g.Z)(ee,[["render",X],["__scopeId","data-v-17d2393a"]]);var te=se;const ae=e=>((0,a.dD)("data-v-6368848c"),e=e(),(0,a.Cn)(),e),oe={key:0,class:"image-info"},ie={class:"info-desc clear-fix"},ne=ae((()=>(0,a._)("div",{class:"start"},null,-1))),le={class:"desc"},de=ae((()=>(0,a._)("div",{class:"end"},null,-1))),re={class:"info-key"},ce={class:"info-list"};function me(e,s,t,o,i,n){const d=(0,a.Q2)("lazy");return 0!==Object.keys(t.imagesInfo).length?((0,a.wg)(),(0,a.iD)("div",oe,[(0,a._)("div",ie,[ne,(0,a._)("div",le,(0,l.zw)(t.imagesInfo.desc),1),de]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.imagesInfo.detailImage,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{key:t},[(0,a._)("div",re,(0,l.zw)(e.key),1),(0,a._)("div",ce,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.list,((e,t)=>(0,a.wy)(((0,a.wg)(),(0,a.iD)("img",{key:t,onLoad:s[0]||(s[0]=(...e)=>n.imgLoad&&n.imgLoad(...e)),alt:""},null,32)),[[d,e]]))),128))])])))),128))])):(0,a.kq)("",!0)}var he={name:"DetailGoodsInfo",data(){return{count:0,imagesLength:0}},props:{imagesInfo:{type:Object,default(){return{}}}},beforeUnmount(){this.imgLoad=null},methods:{imgLoad(){++this.count===this.imagesLength&&this.$route.path.indexOf("/home")&&(this.$emit("imgLoad"),console.log("详情页"))}},watch:{imagesInfo(){this.imagesLength=this.imagesInfo.detailImage[0].list.length}}};const pe=(0,g.Z)(he,[["render",me],["__scopeId","data-v-6368848c"]]);var ue=pe;const fe=e=>((0,a.dD)("data-v-9ae6be66"),e=e(),(0,a.Cn)(),e),ge={key:0,class:"param-info"},ve=fe((()=>(0,a._)("p",null,"参数信息",-1))),we={class:"info-param"},_e={class:"info-param-key"},Ie={class:"param-value"},De={key:0,class:"info-img"},be={alt:""};function ke(e,s,t,o,i,n){const d=(0,a.Q2)("lazy");return 0!==Object.keys(t.paramInfo).length?((0,a.wg)(),(0,a.iD)("div",ge,[ve,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.paramInfo.sizes,((e,s)=>((0,a.wg)(),(0,a.iD)("table",{key:s,class:"info-size"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e,((e,s)=>((0,a.wg)(),(0,a.iD)("tr",{key:s},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e,((e,s)=>((0,a.wg)(),(0,a.iD)("td",{key:s},(0,l.zw)(e),1)))),128))])))),128))])))),128)),(0,a._)("table",we,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.paramInfo.infos,((e,s)=>((0,a.wg)(),(0,a.iD)("tr",{key:s},[(0,a._)("td",_e,(0,l.zw)(e.key),1),(0,a._)("td",Ie,(0,l.zw)(e.value),1)])))),128))]),0!==t.paramInfo.image.length?((0,a.wg)(),(0,a.iD)("div",De,[(0,a.wy)((0,a._)("img",be,null,512),[[d,t.paramInfo.image]])])):(0,a.kq)("",!0)])):(0,a.kq)("",!0)}var ye={name:"DetailParamInfo",props:{paramInfo:{type:Object,default(){return{}}}}};const Ce=(0,g.Z)(ye,[["render",ke],["__scopeId","data-v-9ae6be66"]]);var Te=Ce;const ze=e=>((0,a.dD)("data-v-67ad4e4d"),e=e(),(0,a.Cn)(),e),Le={key:0,class:"comment-info"},$e=ze((()=>(0,a._)("div",{class:"info-header"},[(0,a._)("div",{class:"header-title"},"用户评价"),(0,a._)("div",{class:"header-more"},[(0,a.Uk)(" 更多 "),(0,a._)("i",{class:"arrow-right"})])],-1))),Ye={class:"info-user"},xe={alt:""},Se={class:"info-detail"},We={class:"info-other"},Be={class:"date"},Ze={class:"info-imgs"},He={key:1,class:"comment-info",style:{color:"red"}};function Pe(e,s,t,o,i,n){const d=(0,a.Q2)("lazy");return(0,a.wg)(),(0,a.iD)("div",null,[0!==Object.keys(t.commentInfo).length?((0,a.wg)(),(0,a.iD)("div",Le,[$e,(0,a._)("div",Ye,[(0,a.wy)((0,a._)("img",xe,null,512),[[d,t.commentInfo.user.avatar]]),(0,a._)("span",null,(0,l.zw)(t.commentInfo.user.uname),1)]),(0,a._)("div",Se,[(0,a._)("p",null,(0,l.zw)(t.commentInfo.content),1),(0,a._)("div",We,[(0,a._)("span",Be,(0,l.zw)(n.showDate),1),(0,a._)("span",null,(0,l.zw)(t.commentInfo.style),1)]),(0,a._)("div",Ze,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.commentInfo.images,((e,s)=>(0,a.wy)(((0,a.wg)(),(0,a.iD)("img",{key:s,alt:""})),[[d,e]]))),128))])])])):((0,a.wg)(),(0,a.iD)("div",He,"暂无用户评论"))])}var je=t(4493),Ke={name:"DetailCommentInfo",props:{commentInfo:{type:Object}},computed:{showDate:function(){let e=new Date(1e3*this.commentInfo.created);return(0,je.p)(e,"yyyy-MM-dd hh:mm")}}};const Oe=(0,g.Z)(Ke,[["render",Pe],["__scopeId","data-v-67ad4e4d"]]);var Fe=Oe,qe=t(9367);const Ge=e=>((0,a.dD)("data-v-ab9e4ea8"),e=e(),(0,a.Cn)(),e),Ne={class:"botton-bar"},Ue=(0,a.uE)('<div class="bar-item bar-left" data-v-ab9e4ea8><div data-v-ab9e4ea8><span class="iconfont icon-kefu" data-v-ab9e4ea8></span><span class="text" data-v-ab9e4ea8>客服</span></div><div data-v-ab9e4ea8><span class="iconfont icon-dianpu" data-v-ab9e4ea8></span><span class="text" data-v-ab9e4ea8>店铺</span></div><div data-v-ab9e4ea8><span class="iconfont icon-shoucang" data-v-ab9e4ea8></span><span class="text" data-v-ab9e4ea8>收藏</span></div></div>',1),Ae={class:"bar-item bar-right"},Qe=Ge((()=>(0,a._)("div",{class:"buy"},"购买",-1)));function Me(e,s,t,o,i,n){return(0,a.wg)(),(0,a.iD)("div",Ne,[Ue,(0,a._)("div",Ae,[(0,a._)("div",{class:"cart",onClick:s[0]||(s[0]=(...e)=>n.addToCart&&n.addToCart(...e))},"加入购物车"),Qe])])}var Ee={name:"DetailBottomBar",methods:{addToCart(){this.$emit("addCart")}}};const Re=(0,g.Z)(Ee,[["render",Me],["__scopeId","data-v-ab9e4ea8"]]);var Je=Re,Ve=t(7227),Xe=t(8671),es=t(7707);function ss(e){return(0,es.W)({url:"/detail",params:{iid:e}})}class ts{constructor(e,s,t){this.title=e.title,this.desc=e.desc,this.desc=e.desc,this.newPrice=e.price,this.oldPrice=e.oldPrice,this.discount=e.discountDesc,this.columns=s,this.services=t,this.realPrice=e.lowNowPrice}}class as{constructor(e){this.logo=e.shopLogo,this.name=e.name,this.fans=e.cFans,this.sells=e.cSells,this.score=e.score,this.goodsCount=e.cGoods}}class os{constructor(e,s){this.image=e.image?e.images[0]:"",this.infos=e.set,this.size=s.tables}}function is(){return(0,es.W)({url:"/recommend"})}const ns={class:"toast"};function ls(e,s,t,i,n,d){return(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",ns,[(0,a._)("div",null,(0,l.zw)(t.massage),1)],512)),[[o.F8,t.show]])}var ds={name:"Toast",props:{massage:{type:String,default:""},show:{type:Boolean,default:!1}}};const rs=(0,g.Z)(ds,[["render",ls],["__scopeId","data-v-b733625e"]]);var cs=rs,ms={name:"Detail",data(){return{iid:null,count:0,detailnavbarr:0,topImages:[],goods:{},shop:{},detailInfo:{},paramInfo:{},commentInfo:{},recommends:[],themeTopYs:[],currentIndex:0,show:!1,massage:""}},mixins:[Ve.t,Ve.s],components:{DetailNavBar:w,DetailSwiper:y,DetailBaseInfo:P,DetailShopInfo:te,DetailGoodsInfo:ue,Scroll:Xe.Z,DetailParamInfo:Te,DetailCommentInfo:Fe,GoodsList:qe.Z,DetailBottomBar:Je,Toast:cs},created(){this.iid=this.$route.params.iid,ss(this.iid).then((e=>{const s=e.result;this.topImages=s.itemInfo.topImages,this.goods=new ts(s.itemInfo,s.columns,s.shopInfo.services),this.shop=new as(s.shopInfo),this.detailInfo=s.detailInfo,this.paramInfo=new os(s.itemParams.info,s.itemParams.rule),0!==s.rate.cRate&&(this.commentInfo=s.rate.list[0])})),is().then((e=>{this.recommends=e.data.list}))},mounted(){this.detailnavbarr=this.$refs.detailnavbat.$el.offsetHeight},beforeUnmount(){this.imageLoad=null,this.imgLoad=null,this.goodsimgload=null},methods:{imageLoad(){const e=(0,je.D)(this.$refs.scroll.refresh,10);e()},imgLoad(){const e=(0,je.D)(this.$refs.scroll.refresh,10);e(),this.themeTopYs=[],this.themeTopYs.push(0),this.themeTopYs.push(this.$refs.params.$el.offsetTop),this.themeTopYs.push(this.$refs.comment.$el.offsetTop),this.themeTopYs.push(this.$refs.recommend.$el.offsetTop+this.detailnavbarr)},goodsimgload(){const e=(0,je.D)(this.$refs.scroll.refresh,10);e()},titleClick(e){this.themeTopYs=[],this.themeTopYs.push(0),this.themeTopYs.push(this.$refs.params.$el.offsetTop),this.themeTopYs.push(this.$refs.comment.$el.offsetTop),this.themeTopYs.push(this.$refs.recommend.$el.offsetTop),this.$refs.scroll.scrollTo(0,-this.themeTopYs[e],100)},contentScroll(e){const s=-e.y+this.detailnavbarr;let t=this.themeTopYs.length;for(let a=0;a<t;a++)this.currentIndex!==a&&(a<t-1&&s>=this.themeTopYs[a]&&s<this.themeTopYs[a+1]||a===t-1&&s>this.themeTopYs[a])&&(this.currentIndex=a,this.$refs.detailnavbat.currentIndex=this.currentIndex);this.listanShoBackTop(e)},addToCart(){const e={};e.image=this.topImages[0],e.title=this.goods.title,e.desc=this.goods.desc,e.price=this.goods.realPrice,e.iid=this.iid,this.$store.dispatch("addCart",e).then((e=>{this.show=!0,this.massage=e,setTimeout((()=>{this.show=!1}),1500)}))}}};const hs=(0,g.Z)(ms,[["render",n],["__scopeId","data-v-92d6d522"]]);var ps=hs}}]);
//# sourceMappingURL=484.e1bac49c.js.map